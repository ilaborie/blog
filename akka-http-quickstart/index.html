<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/blog/component---src-layouts-index-js-ab448737d2670585c2fb.js" as="script"/><link rel="preload" href="/blog/component---src-templates-blog-post-js-ca71989682cd54639ff0.js" as="script"/><link rel="preload" href="/blog/path---akka-http-quickstart-65f688c2d48558377460.js" as="script"/><link rel="preload" href="/blog/app-3694e691a40a2920cb14.js" as="script"/><link rel="preload" href="/blog/commons-2174e0bf62fcadcdb7a6.js" as="script"/><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"/><title data-react-helmet="true">Akka HTTP Quickstart | Akka, Concurrency, etc.</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1em;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:0em;}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:1em;line-height:1.75rem;background-color:#fdf6e3;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link href="//fonts.googleapis.com/css?family=Montserrat:700|Merriweather:400,400i,700,700i,900,900i" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #f99}code{line-height:1rem}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/blog/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/blog/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/blog/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/blog/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/blog/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/blog/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/blog/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/blog/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/blog/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/blog/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/blog/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/blog/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/blog/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/blog/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/blog/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/blog/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/blog/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/blog/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/blog/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/blog/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/blog/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/blog/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/blog/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/blog/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/blog/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/blog/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/blog/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/blog/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/blog/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/blog/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/blog/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/blog/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/blog/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/blog/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/blog/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/blog/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/blog/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/blog/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/blog/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/blog/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/blog/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/blog/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/blog/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/blog/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/blog/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/blog/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/blog/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/blog/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/blog/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/blog/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/blog/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/blog/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}</style></head><body><div id="___gatsby"><div style="max-width:42rem;margin-left:auto;margin-right:auto;padding:2.625rem 1.3125rem;" data-reactroot="" data-reactid="1" data-react-checksum="156894074"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/blog/" data-reactid="3">Akka, Concurrency, etc.</a></h3><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">Akka HTTP Quickstart</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem;" data-reactid="7">July 15, 2018</p><div data-reactid="8"><h2>Overview</h2>
<p>In this article, I am going to show how to:</p>
<ul>
<li>Run an Akka HTTP server,</li>
<li>Convert to JSON from Scala case classes,</li>
<li>Use Routing DSL.</li>
</ul>
<p>I will set up a simple HTTP server step by step, which in the end works as follows. As you see below, we get different JSON returned dependent on the path.</p>
<img src="/blog/high-level-api-792c91bb20b6c2f1c281c0280dff73af.gif" />
<p>I will go through the steps in a way you can <strong>quickly understand</strong> the outcome from running the source code, and how it works, <strong>WITHOUT downloading and running the source code yourself.</strong></p>
<p>However, for those who want to go much deeper, the full code is available here, with instruction to run the examples.</p>
<p><a href="https://github.com/richardimaoka/resources/tree/master/akka-http-quickstart">Jump to the Git repository with an intruction to run the code</a></p>
<h2>Setting up a minimal application</h2>
<p>In this section, we set up a pretty simple "Hello World" HTTP server. In the end, an Akka HTTP server can be started like below:</p>
<pre><code class="language-scala">import akka.http.scaladsl.Http
Http().bindAndHandle(routes, "localhost", 8080)
</code></pre>
<p><img src="/blog/hello-world-54af7de2c758beb35a0e588cb6205572.gif" alt="hello-world"></p>
<p>So, the <code>bindAndHandle</code> method is the method to fire up everything and start the HTTP server. Let's see what is required to run this <code>bindAndHandle</code> method.</p>
<p>Firstly, we should update <a href="https://www.scala-sbt.org/1.x/docs/Library-Dependencies.html"><code>libraryDependencies</code></a> in <a href="https://github.com/richardimaoka/resources/blob/master/akka-http-quickstart/build.sbt">build.sbt</a></p>
<pre><code>libraryDependencies ++= Seq(
  "com.typesafe.akka" %% "akka-http"   % "10.1.3",
  "com.typesafe.akka" %% "akka-stream" % "2.5.12",
)
</code></pre>
<p>and add a <a href="https://www.scala-lang.org/documentation/your-first-lines-of-scala.html">typical main <code>object</code></a>, as well as its main method.</p>
<pre><code class="language-scala">object MainHelloWorld {
  def main(args: Array[String]): Unit = {
    // ... application code goes here
  }
}
</code></pre>
<p>Inside the main method, we should start adding necessary building blocks to run the Akka HTTP server.</p>
<pre><code class="language-scala">import akka.actor.ActorSystem
import akka.stream.ActorMaterializer

// remember to make them implicit!!
implicit val system = ActorSystem("Main")       // for Akka Actor
implicit val materializer = ActorMaterializer() // for Akka Stream
</code></pre>
<p>As a preparation, we instantiate <code>ActorSystem</code> and <code>ActorMaterializer</code>. For people who are not familiar with <code>ActorSystem</code> and <code>ActorMaterializer</code>, you can think of them as the underlying infrastructure for running Akka HTTP.</p>
<p>Usually there is only one instance for each of them in an entire application. In this context, an "entire application" means an OS (e.g. Linux or Windows) process, or a JVM process.  Also we need to remember making <code>ActorSystem</code> and <code>ActorMaterializer</code> <strong>implicit</strong>, as other methods take implicit parameters of these types.</p>
<hr>
<p><strong>NOTE:</strong> The below roughly illustrates the Akka technology stack cosisting of an Akka HTTP application.</p>
<p align="center">
  <img src="/blog/akka-layers-4cee9958d09be096686ab2ca6cff3612.svg" alt="akka-layers" width="300px"/>
</p>
<ul>
<li>Akka HTTP is on top of the other two layers</li>
<li>Akka Stream (<code>ActorMaterializer</code>) handles internal processing of Akka HTTP</li>
<li>Akka Actor (<code>ActorSystem</code>) is the base for running Akka Stream</li>
</ul>
<p>In my upcoming articles, we will see how these layers work with each other, and see why and how Akka HTTP is designed as a <a href="https://doc.akka.io/docs/akka-http/current/implications-of-streaming-http-entity.html">"<strong>streaming-first</strong>" HTTP server</a>.</p>
<hr>
<p>The next thing to introduce is <code>Route</code>. <code>Route</code> in Akka HTTP defines the endpoint structure (or RESTful resource structure, we might say) of the HTTP server with <a href="https://doc.akka.io/docs/akka-http/current/routing-dsl/index.html">Route DSL</a>. Again, we only touch the surface of it in this article, and go deeper in later articles.</p>
<pre><code class="language-scala">// importing akka...Directives._ makes `get` and `complete` avaialable in scope
import akka.http.scaladsl.server.Directives._ 
import akka.http.scaladsl.server.Route

lazy val routes: Route = get { // `get` for HTTP GET method
  complete("Hello World")
}
</code></pre>
<p><code>routes</code> in the above code returns <code>"Hello World"</code> for HTTP GET methods to any endpoint in the HTTP server. The <code>complete</code> method is what is typically used in Akka HTTP when we want to return an HTTP response to the client.</p>
<p>Finally we can add the following code to bring up the HTTP server, like we saw at the begining of this section.</p>
<pre><code class="language-scala">import akka.http.scaladsl.Http
Http().bindAndHandle(routes, "localhost", 8080)
</code></pre>
<p>Then run the server.</p>
<pre><code>> sbt
> runMain com.example.MainHelloWorld

[info] Running com.example.Main
Server online at http://localhost:8080/
</code></pre>
<p>And like we saw earlier in this section ...</p>
<p><img src="/blog/hello-world-54af7de2c758beb35a0e588cb6205572.gif" alt="hello-world"></p>
<p>Boom! We said hello to the world!</p>
<h2>High-level Routing DSL to construct HTTP endpoint structure (RESTful resource structure)</h2>
<p>We will go a little deeper in how Route DSL works. It is still at a surface level of it, but hopefully this gives you a better idea about how to construct the endpoint structure with the DSL.</p>
<p>Assuming we want to have the following endpoint structure,</p>
<pre><code>GET /users/person1
GET /users/person2
GET /users/person3
</code></pre>
<p>we can construct the route as follows:</p>
<pre><code class="language-scala{6-7,9,11,14,19}">// importing akka...Directives._ makes `get`, `complete`, `path` avaialable
import akka.http.scaladsl.server.Directives._ 
import akka.http.scaladsl.server.Route

lazy val routes: Route = 
  pathPrefix("users") {
    path("person1") {
      get {
        complete("Joh Don)
      }
    } ~ //don't forget `~`
    path("person2") {
      get {
        complete("Justin Bieber")
      }
    } ~
    path("person3") {
      get {
        complete("Peyton List")
      }
    } 
  }
</code></pre>
<p>Now, we get three different responses dependent on the path.</p>
<p><img src="/blog/high-level-api-step1-3bd357ca49cce9b94a3269704f244dd3.gif" alt="high-level-step1"></p>
<p>Since we set up these three endpoints for the HTTP <strong>GET</strong> method only,
doing (e.g.) POST will give us an error. </p>
<pre><code>$ curl -X POST -d '{"key": "value"}' http://localhost:8080/users/person1

// HTTP/1.1 405 Method Not Allowed
HTTP method not allowed, supported methods: GET
</code></pre>
<p>Also, accessing a path which is not defined in the route will also result in an error.</p>
<pre><code>$ curl http://localhost:8080/users/nosuchperson

// HTTP/1.1 404 Not Found
The requested resource could not be found.
</code></pre>
<p>In a separate article, we go over details about the Route DSL, and introduce how to:</p>
<ul>
<li>support POST, PATCH, DELETE and even custom HTTP methods</li>
<li>authenticate the user</li>
<li>do more complicated stuff like CORS with plugins</li>
<li>and lot more!</li>
</ul>
<h2>JSON to/from Scala case class conversion</h2>
<p>Just returning plain <code>String</code> values to user is nothing interesting.
Akka HTTP is well suited to API servers, and today's API servers most commonly interchanges JSON with clients.</p>
<p><img src="/blog/high-level-api-792c91bb20b6c2f1c281c0280dff73af.gif" alt="high-level"></p>
<p>In Akka HTTP, JSON support comes in a form of plugins, and <a href="https://github.com/spray/spray-json">spray-json</a>
is one of the easiest JSON plugins to use, and also introduced in the official <a href="https://doc.akka.io/docs/akka-http/current/common/json-support.html">doc</a>.</p>
<h3>Scala case class to JSON - HTTP response</h3>
<p>In this article, we cover only one path - Scala case class to JSON conversion. The other way around, from JSON to Scala case classes should be covered in a separate article, to limit the length of this quick-start article.</p>
<p>To use spray-json, we need the following in <code>libraryDependencies</code>.</p>
<pre><code class="language-scala{4,5}">libraryDependencies ++= Seq(
  "com.typesafe.akka" %% "akka-http"   % "10.1.3",
  "com.typesafe.akka" %% "akka-stream" % "2.5.12",
  "com.typesafe.akka" %% "akka-http-spray-json" % "10.1.3",
  "io.spray" %%  "spray-json" % "1.3.4"
)
</code></pre>
<p>And instead of returning a plain <code>String</code>,</p>
<pre><code class="language-scala">get {
  complete("Joh Don")
}
</code></pre>
<p>we can pass in a Scala case class to the <code>complete</code> method,</p>
<pre><code class="language-scala{4-7}">get {
  complete(
    // `User` is a Scala case class
    User(
      name = "Joh Don",
      age = 35
    )
  )
}
</code></pre>
<p>and it's magically turned into JSON within the HTTP response body.</p>
<pre><code class="language-scala">// &#x3C;--------------- converted &#x3C;----------------
// JSON                 | //Scala case class
{                       |  User(
  "name": "Joh Don",    |    name = "Joh Don",
  "age":  35            |    age = 35 
}                       |  )
</code></pre>
<p>So, what's necessary to make this magic happen? We need some type class-based
implicit resolution done by spray-json in conjunction with Akka HTTP.</p>
<hr>
<p><strong>Note</strong>: Understanding what's happening <strong>inside</strong> this <a href="https://doc.akka.io/docs/akka-http/current/common/marshalling.html">JSON to/from Scala case class conversion</a> is really, really a difficult thing. I personally gave it up more than five times in the past, by going through the official documentation, read the source code and ended up just wasting time.</p>
<p>However, to make the JSON to/from Scala case class conversion happen, fortunately Akka HTTP is desined so that we <strong>don't need to</strong> understand what's happening inside. We just need to know what to <code>import</code> and what kind of <code>implicit</code> to define.</p>
<p>If you are still interested in the internal workings, I'll write other articles to help you. I hope my articles I will write work as supplemental materials to the official doc if you felt that is not very easy to understand, like I did before.</p>
<hr>
<p>From here we see how to make the conversion happen. After updating <code>libraryDependencies</code> in <code>build.sbt</code>, we should introduce the following case class.</p>
<pre><code class="language-scala">case class User(
  name: String,
  age:  Int
)
</code></pre>
<p>This case class models the JSON in the HTTP response body, returned to the client. Then we add <code>implicit</code> <code>RootJsonFormat[User]</code> which is typically placed in the companion object of the modeling case class.</p>
<pre><code class="language-scala{2-3,7-12}">//importing DefaultJsonProtocol._ makes `jsonFormat2` available
import spray.json.DefaultJsonProtocol._ 
import spray.json.RootJsonFormat

case class User(name: String, age: Int)

object User {
  // this will fit in the implicit resolution,
  // enabling JSON/case class conversion
  implicit val userJsonFormat: RootJsonFormat[User] =
    jsonFormat2(User.apply)
}
</code></pre>
<p><code>jsonFormat2</code> is a convenient method which takes the <code>apply</code> method of a two-value case class, and return <code>RootJsonFormat</code>. By using <code>jsonFormat2</code>, we don't need to implement field-by-field assignment manually like below.</p>
<pre><code class="language-scala">// if we do not use a plugin like spray-json
val json = ....
User(
  // this field-by-field translation
  // is NOT needed if we use `jsonFormat2`
  name = json.getField("name").to[String],
  age = json.getField("age").to[Int]
)
</code></pre>
<p>Then on the <code>Route</code> side of the code, we need the following import and pass in a <code>User</code> instance to the <code>complete</code> method.</p>
<pre><code class="language-scala{1-3,6}">import akka.http.scaladsl.marshallers.sprayjson.SprayJsonSupport._
//this bring in implicit RootJsonFormat[User]
import com.example.model.User

get {
  complete(User("Joh Don", 35))
}
</code></pre>
<p>Importing these two will bring all the necessary pieces of implicit resolution, which works like putting pieces into the puzzle, and <code>User</code> can now be converted to JSON.</p>
<p><img src="/blog/implicit-resolution-ed2b3779a41e22f8071c2c24413aee7d.jpg" alt="implicit resolution"></p>
<p>We should do the same thing to the three paths we constructed before.</p>
<pre><code class="language-scala{10,15,20}">import akka.http.scaladsl.marshallers.sprayjson.SprayJsonSupport._
import akka.http.scaladsl.server.Directives._ 
import akka.http.scaladsl.server.Route
import com.example.model.User

lazy val routes: Route = 
  path("users/") {
    path("person1"){
      get {
        complete(User(name = "Joh Don", age = 35))
      }
    } ~
    path("person2"){
      get {
        complete(User(name = "Justin Bieber", age = 24))
      }
    } ~
    path("person3"){
      get {
        complete((name = "Peyton List", age = 20))
      }
    }
  }
</code></pre>
<p>And we can see this in action as follows.</p>
<pre><code>> sbt
> runMain com.example.main.MainHighLevelAPI
</code></pre>
<p><img src="/blog/high-level-api-complete-55cf956ed73ee75d743b703e7792cdb5.gif" alt="high-level-api-complete"></p>
<h3>Nested case class support by spray-json</h3>
<p>Another convenient feature of spray-json is (although other JSON plugins also have similar fetures) that it supports conversion of nested Scala case classes. Suppose we have the following two case classes defined.</p>
<pre><code class="language-scala{5-10,15,21-22}">import spray.json.DefaultJsonProtocol.jsonFormat4
import spray.json.RootJsonFormat

case class Address(
  zip:    Int,
  street: String,
  city:   String,
  state:  String,
)

object Address {
  // this will fit in the implicit resolution,
  // enabling JSON/case class conversion
  implicit val addressJsonFormat: RootJsonFormat[Address] =
    jsonFormat4(Address.apply)
}
</code></pre>
<pre><code class="language-scala{3}">import spray.json.DefaultJsonProtocol.jsonFormat3
import spray.json.RootJsonFormat
import Address._ // implicit val addressJsonFormat

case class EnrichedUser(
  name:    String,
  age:     Int,
  address: Address //nested case class
)

object EnrichedUser {
  // this will fit in the implicit resolution,
  // enabling JSON/case class conversion
  implicit val enrichedUserJsonFormat: RootJsonFormat[EnrichedUser] =
    jsonFormat3(User.apply)
}
</code></pre>
<p>And if we <code>complete</code> the route like below, </p>
<pre><code class="language-scala{6-15}">import akka.http.scaladsl.marshallers.sprayjson.SprayJsonSupport._
import com.example.model.User

get {
  complete(
    EnrichedUser(
      "Richard Imaoka",
      150,
      Address(
        zip = 1112222,
        street = "5-6-7 XYZ-street",
        city = "New York",
        state = "New York",
      )
    )
  )
}
</code></pre>
<p>we will get the following JSON.</p>
<pre><code class="language-json{4-9}">{
  "name": "Richard Imaoka",
  "age": 150,
  "address": {
    "zip": 1112222,
    "street" : "5-6-7 XYZ-street",
    "city" : "New York",
    "state" : "New York"     
  }
}
</code></pre>
<p>This helps us model the JSON data with reusable and <strong>composable</strong> Scala case classes, and will be useful when we are constructing a large JSON response.</p>
<h2>Low-level API, needs understanding of HttpRequest and HttpResponse</h2>
<p>Most of the cases we will be implementing our endpoint structure using the Route DSL.
However, for certain cases we would need more fine-grained, lower-level control on how to respond to a given HTTP request. With the low-level API, instead of Route DSL, we implement a request handler in</p>
<ul>
<li><code>HttpRequest => HttpResponse</code>, or </li>
<li><code>HttpRequest => Future[HttpResponse]</code> </li>
</ul>
<p>using pattern matches like below.</p>
<pre><code class="language-scala">import akka.http.scaladsl.model.{HttpRequest, HttpResponse}

val requestHandler: HttpRequest => HttpResponse = {
  case HttpRequest(_, _, _, _, _) => HttpResponse(...)
}    
</code></pre>
<p>That's roughly how the low level API looks differently from the high level one, then we get into a bit of more detail about this below. Like the case of high level API, we need to instantiate <code>ActorSystem</code> and <code>ActorMaterializer</code>.</p>
<pre><code class="language-scala">import akka.actor.ActorSystem
import akka.stream.ActorMaterializer

implicit val system: ActorSystem = ActorSystem("Main")
implicit val materializer: ActorMaterializer = ActorMaterializer()
</code></pre>
<p>And the detail of the pattern match is as follows:</p>
<pre><code class="language-scala{2,4-5,9,12-21}">import akka.http.scaladsl.marshallers.sprayjson.SprayJsonSupport._
import akka.http.scaladsl.marshalling.Marshal
import akka.http.scaladsl.model.HttpMethods.GET
// for HttpRequest, HttpResponse, Uri
import akka.http.scaladsl.model._
import com.example.model.User
import scala.concurrent.{ExecutionContext, Future}

implicit val ec: ExecutionContext = system.dispatcher

val requestHandler: HttpRequest => Future[HttpResponse] = {
  case HttpRequest(
    GET,
    Uri.Path("/"),
    _, // matches any headers
    _, // matches any HTTP entity (HTTP body)
    _  // matches any HTTP protocol
  ) => {
    val m = Marshal(User("Richard Imaoka", 120))
    m.to[HttpResponse]
  }
}
</code></pre>
<p>Then we can run the HTTP server like before,</p>
<pre><code class="language-scala">import akka.http.scaladsl.Http

Http().bindAndHandleAsync(requestHandler, "localhost", 8080)
</code></pre>
<p>and we get this result.</p>
<p><img src="/blog/low-level-api-ab0f421093d7a334cbaccbe40c4e3b36.png" alt="low-level-api"></p>
<h2>The intention of this article</h2>
<p>The content of this article might have felt boring to you, as there have already been many other articles covered the same stuff, and this is just like intro of introduction. </p>
<p>However, I wrote this with a clear intention - I tried to make this article:</p>
<ul>
<li>Easy to see what happens upon running the code, without actually running it by hand</li>
<li>Illustrate how it feels on writing Akka HTTP code, rather than explaining all the technical details</li>
<li>but still not leaving readers in a gap, awkward jump in the context</li>
<li>Have concise text, not talking endlessly about something readers are not interested</li>
</ul></div><hr style="margin-bottom:1.75rem;" data-reactid="9"/><div style="display:flex;margin-bottom:4.375rem;" data-reactid="10"><img src="/blog/static/profile-pic.200b73a9.jpg" alt="Richard Imaoka" style="margin-right:0.875rem;margin-bottom:0;width:3.5rem;height:3.5rem;" data-reactid="11"/><p data-reactid="12"><!-- react-text: 13 -->Written by <!-- /react-text --><strong data-reactid="14">Richard Imaoka</strong><!-- react-text: 15 -->, a Scala developer . You can find me (richardimaoka) at <!-- /react-text --><a href="https://twitter.com/richardimaoka" data-reactid="16">twitter</a><!-- react-text: 17 -->, and <!-- /react-text --><a href="https://github.com/richardimaoka" data-reactid="18">github</a><!-- react-text: 19 -->.<!-- /react-text --></p></div></div><span style="display:block;clear:both;" data-reactid="20"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-3694e691a40a2920cb14.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-ca71989682cd54639ff0.js","35783957827783":"component---src-pages-index-js-f3ac62be02813b36160e.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","74705494097707":"path---remote-minimal-setup-236041f30af0d2d50321.js","160326069391746":"path---serializer-minimal-3a5ef328caa94a3f322f.js","240229599778477":"path---akka-behavior-levels-777fa10830698420117c.js","90106736999892":"path---persistent-actor-minimal-96858b12ad3143e32630.js","235964179464078":"path---dispatcher-behavior-e43175dd21f98148787b.js","205347915900230":"path---hello-world-http-bench-35da9d029fe5bdfb8576.js","218392457165648":"path---akka-http-quickstart-65f688c2d48558377460.js","215048048543570":"path---benchmarking-akka-http-cassandra-local-320a98c23faa1d40e634.js","217632986566844":"path---executor-and-execution-context-da168d50899ef102ec56.js","224718722256965":"path---event-adapter-cassandra-e408dbea1d16996b771a.js","82537549859403":"path---oss-hackathon-1-45b25dd27b904fa78bb5.js","36029449993048":"path---local-minimal-sender-a23036f2d395d0f98d1a.js","86659390886147":"path---local-minimal-receiver-b2b2763cafabcda11bad.js","26725176786023":"path---persistent-actor-minimal-sql-b570323b919e40633eb6.js","165329427061039":"path---mailbox-and-fork-join-task-97325a03045c0cfff16f.js","107690442534757":"path---remote-minimal-receiver-604ce16ec527b8bef1e8.js","221230463047462":"path---swagger-akka-http-94f9bf4298041495fff2.js","241179671101829":"path---remote-minimal-sender-f33f35285248494c3d95.js","142629428675168":"path---index-cbf0e8c6a22e61bd8852.js","114276838955818":"component---src-layouts-index-js-ab448737d2670585c2fb.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-111892799-1', 'auto');
      }
      </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script><script>/*<![CDATA[*/["/blog/commons-2174e0bf62fcadcdb7a6.js","/blog/app-3694e691a40a2920cb14.js","/blog/path---akka-http-quickstart-65f688c2d48558377460.js","/blog/component---src-templates-blog-post-js-ca71989682cd54639ff0.js","/blog/component---src-layouts-index-js-ab448737d2670585c2fb.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>